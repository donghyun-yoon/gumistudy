# MySQL 데이터타입과 내장함수

- [1. 데이터타입](#1-데이터타입)
- [2. 내장함수](#2-내장함수)

## 1. 데이터타입

### 문자형 데이터 타입

|**데이터 유형**|**정의**|
|---|---|
|CHAR(n)|고정 길이를 가지는 문자열을 저장 (M : `0 ~ 255`)<br>지정된 길이보다 짧은 데이터가 입력될 시 나머지 공간은 공백으로 채워짐|
|VARCHAR(n)|가변 길이를 가지는 문자열을 저장하며, 후행 공백을 제거하지 않음 (M : `0 ~ 65535)<br>M이 0 ~ 255 이면 문자길이+1byte, ~65,535 이면 문자길이+2byte|
|TINYTEXT(n)|1~255 개의 가변 길이를 가지는 문자열 저장 (문자길이 + 1byte)|
|TEXT(n)|1~65,535 개의 가변 길이를 가지는 문자열을 저장한다. (문자길이 +2byte)|
|MEDIUMTEXT(n)|1~16,777,215 개의 가변 길이를 가지는 문자열 저장 (문자길이 +3byte)|
|LONGTEXT(n)|1~429,496,729 개의 가변 길이를 가지는 문자열 저장 (문자길이 +4byte)|

### 숫자형 데이터 타입

1\) 정수 유형

|**데이터 유형**|**정의**|
|---|---|
|TINYINT(n)|정수형 데이터 타입 (1byte)<br>`-128 ~ +127` 또는 `0 ~ 255` 표현 가능|
|SMALLINT(n)|정수형 데이터 타입 (2byte)<br>`-32768 ~ +32767` 또는 `0 ~ 65536` 표현 가능|
|MEDIUMINT(n)|정수형 데이터 타입 (3byte)<br>`-8388608 ~ +8388607`  또는 `0 ~ 16777215` 표현 가능|
|INT(n)|정수형 데이터 타입 (1byte)<br>`-2147483648  ~ +2147483647`  또는 `0 ~ 4294967295` 표현 가능|
|BIGINT(n)|정수형 데이터 타입 (8byte)<br>`-92233720036854775808 ~ 92233720036854775807` 또는 `0 ~ 18446744073709551615` 표현 가능|

2\) 고정 소수점 유형

|**데이터 유형**|**정의**|
|---|---|
|DECIMAL(M,D)|M자리 정수(정밀도)와 D자리 소수점(스케일)으로 표현<br>최대 65자리까지 표현할 수 있다|

3\) 부동 소수점 유형

|**데이터 유형**|**정의**|
|---|---|
|FLOAT(M,D)|정밀도가 작은 부동소수점을 표현. UNSIGNED 인 경우 음수 값을 허용하지 않는다.<br>`-3.402823466E+38 ~ 3.402823466E+38`|
|DOUBLE(M,D)|보통 크기의 부동소수점을 표현. UNSIGNED 인 경우 음수 값을 허용하지 않는다.<br>`-1.7976931348623157E+308 ~ 1.7976931348623157E+308`|

> FLOAT, DOUBLE 등의 부동 소수점 유형은 MySQL 8.0.17 이후 버전부터 사용되지 않음<br>
> 참고 문서 : [MySQL 8.0 Reference > Problems with Floating-Point Values](https://dev.mysql.com/doc/refman/8.0/en/problems-with-float.html)

### 날짜형 데이터 타입

|**데이터 유형**|**정의**|
|---|---|
|DATE|날짜를 표현하는 타입 (3바이트)<br>`1000-01-01 ~ 9999-12-31`|
|DATETIME|날짜와 시간을 같이 나타내는 타입 (8바이트)<br>`1000-01-01 00:00:00 ~ 9999-12-31 23:59:59`|
|TIMESTAMP|날짜와 시간을 같이 나타내는 타입 (4바이트)<br>`1970-01-01 00:00:00 ~ 2037-01-19 03:14:07`<br>*현재 시간 적용 후 시스템 타임존을 변경하면 그에 따라 자동으로 변경됨*|
|TIME|시간을 표현하는 타입 (3바이트)<br>`-838:59:59 ~ 838:59:59`|
|YEAR|연도를 나타낸다. (1바이트)<br>`1901 ~ 2155 / 70 ~ 69 (1970~2069)`|

> YEAR(4) 와 같이 명시적인 길이를 표기한 데이터 유형은 MySQL 8.0.19 이후 버전부터 사용되지 않음<br>
> YEAR(2) 와 같이 두 자리로 표기하는 데이터 유형은 MySQL 5.7 이후 버전부터 지원하지 않음<br>
> 참고문서 : [MySQL 5.7 Reference > 2-Digit YEAR(2) Limitations and Migrating to 4-Digit YEAR](https://dev.mysql.com/doc/refman/8.0/en/two-digit-years.html)

## 2. 내장함수

### 숫자 관련 함수

|함수|설명|
|---|---|
|ABS(숫자)|절대값 출력|
|CEILING(숫자)|값보다 큰 정수 중 가장 작은 수|
|FLOOR(숫자)|값보다 작은 정수 중 가장 큰 수|
|ROUND(숫자,자릿수)|숫자를 소수점 이하 자릿수에서 반올림 (자릿수는 양수,0,음수를 갖을 수 있음)|
|TRUNCATE(숫자,자릿수)|숫자를 소수점 이하 자릿수에서 버림|
|POW(X,Y) or POWER(X,Y)|X의 Y승|
|MOD(분자, 분모)|분자를 분모로 나눈 나머지를 구한다.(연산자 %와 같음)|
|GREATEST(숫자1,숫자2,숫자3...)|주어진 수 중 제일 큰 수 리턴|
|LEAST(숫자1,숫자2,숫자3...)|주어진 수 중 제일 작은 수 리턴|
|INTERVAL(a,b,c,d.....)|a(숫자)의 위치 반환|

### 문자 관련 함수

|함수|설명|
|---|---|
|ASCII(문자)|문자의 아스키 코드값 리턴|
|CONCAT('문자열1','문자열2','문자열3'...)|문자열들을 이어줌|
|INSERT('문자열','시작위치','길이','새로운문자열')|문자열의 시작위치부터 길이만큼 새로운 문자열로 대치|
|REPLACE('문자열','기존문자열','바뀔문자열')|문자열 중 기존문자열을 바뀔 문자열로 바꿈|
|INSTR('문자열','찾는문자열')|문자열 중 찾는 문자열의 위치값을 출력|
|LEFT('문자열',개수)|문자열 중 왼쪽에서 개수만큼 추출|
|RIGHT('문자열',개수)|문자열 중 오른쪽에서 개수만큼 추출|
|MID('문자열',시작위치,개수)|문자열 중 시작위치부터 개수만큼 출력|
|SUBSTRING('문자열',시작위치,개수)|문자열 중 시작위치부터 개수만큼 출력|
|LTRIM('문자열')|문자열 중 왼쪽의 공백 제거|
|RTRIM('문자열')|문자열 중 오른쪽의 공백 제거|
|TRIM('문자열')|양쪽 모두의 공백 제거|
|LCASE('문자열') or LOWER('문자열')|소문자로 변환|
|UCASE('문자열') or UPPER('문자열')|대문자로 변환|
|REVERSE('문자열')|문자열을 반대로 나열|

### 논리 관련 함수

|함수|설명|
|---|---|
|IF(논리식,참일 때 값,거짓일 때 값)|논리식이 참이면 참일 때 값을 출력, 논리식이 거짓이면 거짓일 때 값 출력|
|IFNULL(값1,값2)|값1이 NULL이면 값2로 대치하고 그렇지 않으면 값1을 출력|

### 집계 함수

|함수|설명|
|---|---|
|COUNT(필드명)|NULL 값이 아닌 레코드 수를 구함|
|SUM(필드명)|필드명의 합계를 구함|
|AVG(필드명)|각각의 그룹 안에서 필드명의 평균값을 구함|
|MAX(필드명)|최대값을 구함|
|MIN(필드명)|최소값을 구함|

### 날짜 관련 함수

|함수|설명|
|---|---|
|NOW() or SYSDATE() or CURRENT_TIMESTAMP()|현재 날짜와 시간 출력|
|CURDATE() or CURRENT_DATE()|현재 날짜 출력|
|CURTIME() or CURRENT_TIME()|현재 시간 출력|
|DATE_ADD(날짜,INTERVAL 기준값)|날짜에서 기준값 만큼 더함<br>※ 기준값 : YEAR, MONTH, DAY, HOUR, MINUTE, SECOND|
|DATE_SUB(날짜,INTERVAL 기준값)|날짜에서 기준값 만큼 뺌<br>※ 기준값 : YEAR, MONTH, DAY, HOUR, MINUTE, SECOND|
|YEAR(날짜)|날짜의 연도 출력|
|MONTH(날짜)|날짜의 월 출력|
|MONTHNAME(날짜)|날짜의 월을 영어로 출력|
|DAYNAME(날짜)|날짜의 요일일 영어로 출력|
|DAYOFMONTH(날짜)|날짜의 월별 일자 출력|
|DAYOFWEEK(날짜)|날짜의 주별 일자 출력(월요일(0),화요일(1)...일요일(6))|
|WEEKDAY(날짜)|날짜의 주별 일자 출력(월요일(0),화요일(1)...일요일(6))|
|DAYOFYEAR(날짜)|일년을 기준으로 해당 날짜까지의 일 수|
|WEEK(날짜)|해당 날짜가 일년 중 몇 번째 주인지 출력|
|FROM_DAYS(일 수)|00년 00월 00일부터 일 수 만큼 경과한 날의 날짜 출력|
|TO_DAYS(날짜)|00년 00월 00일 부터 날짜까지의 일자 수 출력|
|DATE_FORMAT(날짜,'형식')|날짜를 형식에 맞게 출력|

### **※ DATE_FORMAT 사용하기**
> 첫 번째 파라미터에는 원하는 컬럼, 데이터를 넣고 두 번째 파라미터에는 원하는 출력 형태의 포맷 문자열 입력<br>
> **사용하는 포맷의 대,소문자를 유의하여 사용!**

▶ 날짜 포맷

|포맷|설명|
|---|---|
|%Y|연도 (4자리 모두 표기)|
|%y|연도 (끝 2자리만 표기)|
|%M|월 (월 이름 표기, January ~ December)|
|%m|월 (월 숫자 표기, 00 ~ 12)|
|%d|일 (00 ~ 31)|

▶ 시간 포맷

|포맷|설명|
|---|---|
|%H|시간 (24시간, 00 ~ 23)|
|%h|시간 (12시간, 00 ~ 12)|
|%i|분 (00 ~ 59)|
|%s|초 (00 ~ 59)|

예시
```
now()
2020-02-06 11:27:00

select date_format(now(), '%Y-%m-%d')
2020-02-06

select date_format(now(), '%Y.%m.%d %H:%i:%s')
2020.02.06 11:27:00
```

문자열을 날짜로 변경
```
select date_format('2020/02/06 15:16:50', '%Y.%m.%d %H:%i:%s')
2020.02.06 03:16:50
```

# JOIN

![sqljoins](https://t1.daumcdn.net/cfile/tistory/99219C345BE91A7E32)


## References
- https://devdhjo.github.io/mysql/2020/01/30/database-mysql-003.html
- http://egloos.zum.com/metalbear/v/3521684